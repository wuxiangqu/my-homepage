webpackJsonp([4],{"17nD":function(t,n,e){var a=e("O5cW");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("8bSs")("0cbaef60",a,!0)},Ja6s:function(t,n,e){"use strict";function a(t){e("q73K")}function i(t){e("17nD")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("AA3o"),s=e.n(o),c=e("xSur"),h=e.n(c),r=function(){function t(n){s()(this,t),this.commondType={DRAW_LINE:"line",DRAW_SEGMENT:"segment",DRAW_RECT:"rect",DRAW_CIRCLE:"circle",ERASE:"erase",CLEAR:"clear",GOFORWARD:"forword",GOBACK:"back"},this.canDraw=!1,this.downPoint=null,this.movePoint=null,this.canvasImageData=null,this.eraseRadius=20,this.araseLineWidth=1,this.eraseStrokeStyle="rgba(0,0,0,.5)",this.cacheDatas=[],this.cacheIndex=-1,this.drawType=this.commondType.DRAW_LINE,this.canvas=n.canvas,this.canvas.width=n.width,this.canvas.height=n.height,this.context=this.canvas.getContext("2d"),this.context.lineWidth=n.lineWidth,this.context.lineCap=n.lineCap,this.context.lineJoin=n.lineJoin,this.context.fillStyle=this.context.strokeStyle=n.color,this.canFill=n.canFill,this.bindEvent()}return h()(t,[{key:"bindEvent",value:function(){var t=this;this.canvas.addEventListener("mousedown",function(n){t.mousedown(n)},!1),this.canvas.addEventListener("mousemove",function(n){t.mousemove(n)},!1),this.canvas.addEventListener("mouseup",function(n){t.mouseup(n)},!1),this.canvas.addEventListener("mouseout",function(n){t.mouseout(n)},!1)}},{key:"mousedown",value:function(t){this.canDraw=!0;var n=this.windowToCanvas(t);this.downPoint=this.movePoint=n,this.canvasImageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}},{key:"mousemove",value:function(t){if(this.canDraw){var n=this.windowToCanvas(t),e=this.movePoint;switch(this.movePoint=n,this.drawType){case this.commondType.DRAW_LINE:this.drawLine(e,n);break;case this.commondType.DRAW_SEGMENT:this.drawSegment(this.downPoint,n);break;case this.commondType.DRAW_RECT:this.drawRect(this.downPoint,n);break;case this.commondType.DRAW_CIRCLE:this.drawCircle(this.downPoint,n);break;case this.commondType.ERASE:this.erase()}}}},{key:"mouseup",value:function(t){this.drawType===this.commondType.ERASE&&this.context.putImageData(this.canvasImageData,0,0),this.canDraw=!1,this.cacheDatas.push(this.context.getImageData(0,0,this.canvas.width,this.canvas.height)),this.cacheIndex++}},{key:"mouseout",value:function(t){this.canDraw=!1}},{key:"drawLine",value:function(t,n){this.context.save(),this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(n.x,n.y),this.context.stroke(),this.context.restore()}},{key:"drawSegment",value:function(t,n){this.context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.canvasImageData,0,0),this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(n.x,n.y),this.context.stroke(),this.context.restore()}},{key:"drawRect",value:function(t,n){var e=t.x<n.x?t.x:n.x,a=t.y<n.y?t.y:n.y,i=Math.abs(n.x-t.x),o=Math.abs(n.y-t.y);this.context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.canvasImageData,0,0),this.context.strokeRect(e,a,i,o),this.canFill&&this.context.fillRect(e,a,i,o),this.context.restore()}},{key:"drawCircle",value:function(t,n){var e=t.x-n.x,a=t.y-n.y,i=Math.sqrt(e*e+a*a);this.context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.canvasImageData,0,0),this.context.beginPath(),this.context.arc(t.x,t.y,i,0,2*Math.PI,!1),this.context.stroke(),this.canFill&&this.context.fill(),this.context.restore()}},{key:"drawEraseCirle",value:function(){this.context.save(),this.context.lineWidth=this.araseLineWidth,this.context.strokeStyle=this.eraseStrokeStyle,this.context.beginPath(),this.context.arc(this.movePoint.x,this.movePoint.y,this.eraseRadius,2*Math.PI,0),this.context.stroke(),this.context.restore()}},{key:"erase",value:function(){var t=this.canvas.width,n=this.canvas.height;this.context.putImageData(this.canvasImageData,0,0),this.context.save(),this.context.strokeStyle=this.eraseStrokeStyle,this.context.beginPath(),this.context.arc(this.movePoint.x,this.movePoint.y,this.eraseRadius,2*Math.PI,0),this.context.clip(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvasImageData=this.context.getImageData(0,0,t,n),this.context.restore(),this.drawEraseCirle()}},{key:"clear",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.cacheDatas=[],this.cacheIndex=-1}},{key:"goBack",value:function(){if(this.cacheIndex>0){var t=--this.cacheIndex;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.cacheDatas[t],0,0)}}},{key:"goForward",value:function(){var t=this.cacheDatas.length;if(this.cacheIndex<t-1){var n=++this.cacheIndex;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.cacheDatas[n],0,0)}}},{key:"setDrawType",value:function(t){this.drawType=t}},{key:"setLineWidth",value:function(t){this.context.lineWidth=t}},{key:"setColor",value:function(t){this.context.fillStyle=this.context.strokeStyle=t}},{key:"setCanFill",value:function(t){this.canFill=t}},{key:"windowToCanvas",value:function(t){var n=this.canvas.getBoundingClientRect();return{x:t.clientX-n.left*(this.canvas.width/n.width),y:t.clientY-n.top*(this.canvas.height/n.height)}}}]),t}(),l={props:{lineWidth:{type:Number,default:1},color:{type:String,default:"rgb(0,0,0)"},canFill:{type:Boolean,default:!1},drawType:{type:String,default:"line"}},data:function(){return{board:null}},mounted:function(){var t=this.$refs.canvas,n=t.parentNode.clientWidth,e=t.parentNode.clientHeight;this.board=new r({canvas:t,width:n,height:e,lineWidth:this.lineWidth,lineCap:"round",lineJoin:"round",color:this.color,canFill:this.canFill})},watch:{drawType:function(t){this.board.setDrawType(t)},lineWidth:function(t){this.board.setLineWidth(t)},color:function(t){this.board.setColor(t)},canFill:function(t){this.board.setCanFill(t)}},methods:{clear:function(){this.board.clear()},goForward:function(){this.board.goForward()},goBack:function(){this.board.goBack()}}},d=function(){var t=this,n=t.$createElement;return(t._self._c||n)("canvas",{ref:"canvas"})},x=[],A={render:d,staticRenderFns:x},f=A,v=e("/Xao"),p=a,u=v(l,f,!1,p,null,null),b=u.exports,m={data:function(){return{items:[{drawtype:"line",text:"画笔",isActive:!0},{drawtype:"segment",text:"直线",isActive:!1},{drawtype:"rect",text:"方形",isActive:!1},{drawtype:"circle",text:"圆形",isActive:!1},{drawtype:"erase",text:"板擦",isActive:!1}],clearText:"清空",forwardText:"前进",backText:"后退",lineWidth:2,color:"rgb(14, 85, 224)",canFill:!1,drawType:"line"}},components:{myBoard:b},methods:{setDrawType:function(t){for(var n=t.target,e=n.getAttribute("data-drawtype"),a=0;a<this.items.length;a++){var i=this.items[a];i.drawtype===e?i.isActive=!0:i.isActive=!1}this.drawType=e},clear:function(){this.$refs.board.clear()},goForward:function(){this.$refs.board.goForward()},goBack:function(){this.$refs.board.goBack()}}},g=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"main-box"},[e("div",{staticClass:"board-box"},[e("my-board",{ref:"board",attrs:{lineWidth:t.lineWidth,color:t.color,canFill:t.canFill,drawType:t.drawType}})],1),t._v(" "),e("div",{staticClass:"tool-box"},[e("div",{staticClass:"draw-type"},t._l(t.items,function(n,a){return e("a",{key:a,class:{active:n.isActive},attrs:{"data-drawtype":n.drawtype},on:{click:t.setDrawType}},[t._v("\n        "+t._s(n.text)+"\n      ")])})),t._v(" "),e("div",{staticClass:"action-type"},[e("a",{on:{click:t.clear}},[t._v(t._s(t.clearText))]),t._v(" "),e("a",{on:{click:t.goForward}},[t._v(t._s(t.forwardText))]),t._v(" "),e("a",{on:{click:t.goBack}},[t._v(t._s(t.backText))])]),t._v(" "),e("div",{staticClass:"options-box"},[e("span",[t._v("线宽：")]),t._v(" "),e("el-slider",{staticStyle:{width:"80px",display:"inline-block"},attrs:{min:1,max:10},model:{value:t.lineWidth,callback:function(n){t.lineWidth=n},expression:"lineWidth"}}),t._v(" "),e("span",[t._v("颜色：")]),t._v(" "),e("el-color-picker",{model:{value:t.color,callback:function(n){t.color=n},expression:"color"}}),t._v(" "),e("el-checkbox",{staticStyle:{"margin-left":"20px"},model:{value:t.canFill,callback:function(n){t.canFill=n},expression:"canFill"}},[e("span",{staticStyle:{"font-size":"16px",color:"#fff"}},[t._v("填充")])])],1)])])},y=[],C={render:g,staticRenderFns:y},B=C,w=e("/Xao"),k=i,E=w(m,B,!1,k,"data-v-4f4fe3ea",null);n.default=E.exports},O5cW:function(t,n,e){n=t.exports=e("BkJT")(!0),n.push([t.i,"\n.main-box[data-v-4f4fe3ea] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.main-box .board-box[data-v-4f4fe3ea] {\n  position: absolute;\n  left: 3px;\n  right: 3px;\n  top: 3px;\n  bottom: 48px;\n  border: 1px solid #acacac;\n}\n.main-box .tool-box[data-v-4f4fe3ea] {\n  position: absolute;\n  left: 3px;\n  right: 3px;\n  bottom: 3px;\n  height: 40px;\n  border: 1px solid #acacac;\n  background-color: #4a4ebb;\n  overflow: hidden;\n  text-align: center;\n}\n.main-box .tool-box .draw-type[data-v-4f4fe3ea] {\n  display: inline-block;\n}\n.main-box .tool-box .draw-type a[data-v-4f4fe3ea] {\n  display: inline-block;\n  height: 40px;\n  width: 50px;\n  line-height: 40px;\n  text-align: center;\n  color: #fff;\n  cursor: pointer;\n}\n.main-box .tool-box .draw-type a[data-v-4f4fe3ea]:hover {\n  background: #312faf;\n}\n.main-box .tool-box .action-type[data-v-4f4fe3ea] {\n  display: inline-block;\n}\n.main-box .tool-box .action-type a[data-v-4f4fe3ea] {\n  display: inline-block;\n  height: 40px;\n  width: 50px;\n  line-height: 40px;\n  text-align: center;\n  color: #fff;\n  cursor: pointer;\n}\n.main-box .tool-box .action-type a[data-v-4f4fe3ea]:active {\n  background: #312faf;\n}\n.main-box .tool-box .options-box[data-v-4f4fe3ea] {\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.main-box .tool-box .options-box > span[data-v-4f4fe3ea] {\n  margin-left: 20px;\n  display: inline-block;\n  height: 40px;\n  width: 50px;\n  line-height: 40px;\n  text-align: center;\n  color: #fff;\n}\n.active[data-v-4f4fe3ea] {\n  background: #312faf;\n}\n","",{version:3,sources:["E:/Program Files/nodejsworkspace/my-page/src/components/page/canvas/Board.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,UAAU;EACV,WAAW;EACX,SAAS;EACT,aAAa;EACb,0BAA0B;CAC3B;AACD;EACE,mBAAmB;EACnB,UAAU;EACV,WAAW;EACX,YAAY;EACZ,aAAa;EACb,0BAA0B;EAC1B,0BAA0B;EAC1B,iBAAiB;EACjB,mBAAmB;CACpB;AACD;EACE,sBAAsB;CACvB;AACD;EACE,sBAAsB;EACtB,aAAa;EACb,YAAY;EACZ,kBAAkB;EAClB,mBAAmB;EACnB,YAAY;EACZ,gBAAgB;CACjB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,sBAAsB;CACvB;AACD;EACE,sBAAsB;EACtB,aAAa;EACb,YAAY;EACZ,kBAAkB;EAClB,mBAAmB;EACnB,YAAY;EACZ,gBAAgB;CACjB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,4BAA4B;EAC5B,4BAA4B;EAC5B,qBAAqB;EACrB,yBAAyB;MACrB,sBAAsB;UAClB,wBAAwB;EAChC,0BAA0B;MACtB,uBAAuB;UACnB,oBAAoB;CAC7B;AACD;EACE,kBAAkB;EAClB,sBAAsB;EACtB,aAAa;EACb,YAAY;EACZ,kBAAkB;EAClB,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,oBAAoB;CACrB",file:"Board.vue",sourcesContent:["\n.main-box[data-v-4f4fe3ea] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.main-box .board-box[data-v-4f4fe3ea] {\n  position: absolute;\n  left: 3px;\n  right: 3px;\n  top: 3px;\n  bottom: 48px;\n  border: 1px solid #acacac;\n}\n.main-box .tool-box[data-v-4f4fe3ea] {\n  position: absolute;\n  left: 3px;\n  right: 3px;\n  bottom: 3px;\n  height: 40px;\n  border: 1px solid #acacac;\n  background-color: #4a4ebb;\n  overflow: hidden;\n  text-align: center;\n}\n.main-box .tool-box .draw-type[data-v-4f4fe3ea] {\n  display: inline-block;\n}\n.main-box .tool-box .draw-type a[data-v-4f4fe3ea] {\n  display: inline-block;\n  height: 40px;\n  width: 50px;\n  line-height: 40px;\n  text-align: center;\n  color: #fff;\n  cursor: pointer;\n}\n.main-box .tool-box .draw-type a[data-v-4f4fe3ea]:hover {\n  background: #312faf;\n}\n.main-box .tool-box .action-type[data-v-4f4fe3ea] {\n  display: inline-block;\n}\n.main-box .tool-box .action-type a[data-v-4f4fe3ea] {\n  display: inline-block;\n  height: 40px;\n  width: 50px;\n  line-height: 40px;\n  text-align: center;\n  color: #fff;\n  cursor: pointer;\n}\n.main-box .tool-box .action-type a[data-v-4f4fe3ea]:active {\n  background: #312faf;\n}\n.main-box .tool-box .options-box[data-v-4f4fe3ea] {\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.main-box .tool-box .options-box > span[data-v-4f4fe3ea] {\n  margin-left: 20px;\n  display: inline-block;\n  height: 40px;\n  width: 50px;\n  line-height: 40px;\n  text-align: center;\n  color: #fff;\n}\n.active[data-v-4f4fe3ea] {\n  background: #312faf;\n}\n"],sourceRoot:""}])},h4ss:function(t,n,e){n=t.exports=e("BkJT")(!0),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"Board.vue",sourceRoot:""}])},q73K:function(t,n,e){var a=e("h4ss");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("8bSs")("2885d97f",a,!0)}});
//# sourceMappingURL=4.86e6f6a87bb612067105.js.map